# SUMO Data Collection - CSV Files Reference

This document lists all CSV files generated by SUMO simulations and their columns.

## Overview

The data collection system generates 8 CSV files:

1. **vehicle_data.csv** - Individual vehicle states and properties
2. **traffic_light_data.csv** - Traffic light states and phases
3. **traffic_light_actions.csv** - Log of all traffic light control actions
4. **lane_data.csv** - Lane-level metrics and occupancy
5. **junction_data.csv** - Junction positions
6. **edge_data.csv** - Edge-level metrics and travel times
7. **simulation_data.csv** - Overall simulation state
8. **metrics_summary.csv** - Aggregated evaluation metrics

All files share `step` (int) and `time` (float, seconds) columns for temporal alignment.

---

## 1. vehicle_data.csv

Per-vehicle state information at each collection step.

| Column | Type | Description |
|--------|------|-------------|
| `step` | int | Simulation step number |
| `time` | float | Simulation time in seconds |
| `vehicle_id` | string | Unique vehicle identifier |
| `position_x` | float | Vehicle X coordinate (meters) |
| `position_y` | float | Vehicle Y coordinate (meters) |
| `speed` | float | Current vehicle speed (m/s) |
| `acceleration` | float | Current vehicle acceleration (m/sÂ²) |
| `angle` | float | Vehicle heading angle (degrees) |
| `waiting_time` | float | Cumulative waiting time (seconds) |
| `lane_id` | string | Current lane identifier |
| `lane_position` | float | Position within lane (meters) |
| `route` | string | Vehicle route (comma-separated edges) |
| `co2_emission` | float | CO2 emissions (mg) |
| `co_emission` | float | CO emissions (mg) |
| `nox_emission` | float | NOx emissions (mg) |
| `fuel_consumption` | float | Fuel consumed (ml) |

---

## 2. traffic_light_data.csv

Traffic light system states at each collection step.

| Column | Type | Description |
|--------|------|-------------|
| `step` | int | Simulation step number |
| `time` | float | Simulation time in seconds |
| `tls_id` | string | Traffic light system identifier |
| `phase` | int | Current phase number |
| `phase_duration` | float | Duration of current phase (seconds) |
| `program` | string | Current program name |
| `state` | string | Traffic light state string (e.g., "GGGrrrGGGrrr") |
| `controlled_lanes` | string | Comma-separated list of controlled lanes |

**State String Encoding**: `G`=Green, `r`=Red, `y`=Yellow, `g`=Green with priority, `s`=Stop, `u`=Unregulated. Each character represents one lane's traffic light state.

---

## 3. traffic_light_actions.csv

Log of all traffic light control actions taken during simulation.

| Column | Type | Description |
|--------|------|-------------|
| `step` | int | Simulation step when action occurred |
| `time` | float | Simulation time when action occurred |
| `tls_id` | string | Traffic light system identifier |
| `action_type` | string | Type: `phase_change`, `program_change`, or `duration_change` |
| `old_value` | string/int | Previous value before action |
| `new_value` | string/int | New value after action |
| `controlled_lanes` | string | Lanes controlled by this traffic light |

---

## 4. lane_data.csv

Lane-level aggregated metrics.

| Column | Type | Description |
|--------|------|-------------|
| `step` | int | Simulation step number |
| `time` | float | Simulation time in seconds |
| `lane_id` | string | Lane identifier |
| `occupancy` | float | Lane occupancy percentage (0-100%) |
| `density` | float | Vehicle density (vehicles/km) |
| `vehicle_count` | int | Number of vehicles in lane |
| `mean_speed` | float | Mean speed of vehicles in lane (m/s) |
| `waiting_time` | float | Total waiting time in lane (seconds) |
| `queue_length` | int | Number of halted vehicles |

---

## 5. junction_data.csv

Junction positions.

| Column | Type | Description |
|--------|------|-------------|
| `step` | int | Simulation step number |
| `time` | float | Simulation time in seconds |
| `junction_id` | string | Junction identifier |
| `position_x` | float | Junction X coordinate (meters) |
| `position_y` | float | Junction Y coordinate (meters) |

**Note**: Junction positions are constant across steps.

---

## 6. edge_data.csv

Edge-level aggregated metrics. Edges represent road segments between junctions.

| Column | Type | Description |
|--------|------|-------------|
| `step` | int | Simulation step number |
| `time` | float | Simulation time in seconds |
| `edge_id` | string | Edge identifier |
| `mean_speed` | float | Mean speed on edge (m/s) |
| `vehicle_count` | int | Number of vehicles on edge |
| `occupancy` | float | Edge occupancy percentage (0-100%) |
| `travel_time` | float | Travel time on edge (seconds) |

---

## 7. simulation_data.csv

Overall simulation state metrics.

| Column | Type | Description |
|--------|------|-------------|
| `step` | int | Simulation step number |
| `time` | float | Simulation time in seconds |
| `vehicle_count` | int | Current number of vehicles in simulation |
| `expected_vehicles` | int | Expected number of vehicles |
| `departed_count` | int | Total vehicles that have departed |
| `arrived_count` | int | Total vehicles that have arrived |

---

## 8. metrics_summary.csv

Aggregated evaluation metrics computed at the end of simulation (single row).

### Primary Metrics
- `average_waiting_time` (float, seconds) - Average waiting time across all vehicles
- `max_waiting_time` (float, seconds) - Maximum waiting time of any vehicle
- `total_waiting_time` (float, seconds) - Sum of all waiting times
- `average_travel_time` (float, seconds) - Average travel time across edges
- `max_travel_time` (float, seconds) - Maximum travel time across edges
- `min_travel_time` (float, seconds) - Minimum travel time across edges
- `throughput` (int) - Total number of vehicles that arrived
- `total_departed` (int) - Total number of vehicles that departed

### Queue Metrics
- `max_queue_length` (int, vehicles) - Maximum queue length across all lanes
- `average_queue_length` (float, vehicles) - Average queue length across all lanes
- `total_queue_length` (int, vehicles) - Sum of all queue lengths

### Speed Metrics
- `average_speed` (float, m/s) - Average vehicle speed
- `max_speed` (float, m/s) - Maximum vehicle speed
- `min_speed` (float, m/s) - Minimum vehicle speed
- `average_lane_speed` (float, m/s) - Average lane speed
- `min_lane_speed` (float, m/s) - Minimum lane speed
- `average_edge_speed` (float, m/s) - Average edge speed

### Emissions Metrics
- `total_co2_emission` (float, mg) - Total CO2 emissions
- `average_co2_emission` (float, mg) - Average CO2 emissions per vehicle
- `total_co_emission` (float, mg) - Total CO emissions
- `total_nox_emission` (float, mg) - Total NOx emissions

### Fuel Consumption
- `total_fuel_consumption` (float, ml) - Total fuel consumed
- `average_fuel_consumption` (float, ml) - Average fuel consumption per vehicle

### Lane Metrics
- `max_lane_occupancy` (float, %) - Maximum lane occupancy
- `average_lane_occupancy` (float, %) - Average lane occupancy
- `max_lane_density` (float, vehicles/km) - Maximum lane density
- `average_lane_density` (float, vehicles/km) - Average lane density
- `max_lane_waiting_time` (float, seconds) - Maximum waiting time across all lanes
- `average_lane_waiting_time` (float, seconds) - Average waiting time across all lanes

### Edge Metrics
- `average_edge_occupancy` (float, %) - Average edge occupancy
- `max_edge_occupancy` (float, %) - Maximum edge occupancy

### Simulation Metrics
- `simulation_duration` (float, seconds) - Total simulation duration
- `simulation_start_time` (float, seconds) - Simulation start time
- `unique_vehicles` (int) - Number of unique vehicles in simulation
- `average_vehicle_count` (float) - Average number of vehicles present
- `max_vehicle_count` (int) - Maximum number of vehicles present

---

## File Locations

All CSV files are written to the directory specified by `output_dir` parameter in `run_automated()`:
- `{output_dir}/vehicle_data.csv`
- `{output_dir}/traffic_light_data.csv`
- `{output_dir}/traffic_light_actions.csv`
- `{output_dir}/lane_data.csv`
- `{output_dir}/junction_data.csv`
- `{output_dir}/edge_data.csv`
- `{output_dir}/simulation_data.csv`
- `{output_dir}/metrics_summary.csv`
